<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Página 2 - Frente</title>

  <!-- PWA / iOS -->
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />

  <style>
    :root { --vh: 100vh; }
    html, body { height:100%; margin:0; padding:0; -webkit-user-select:none; user-select:none; background:#fff; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
    .bg { position: fixed; inset:0; background-image: url('pagina2.jpeg'); background-repeat:no-repeat; background-position:center top; background-size:cover; z-index:0; pointer-events:none; }
    .ui { position:relative; z-index:1; min-height:calc(var(--vh)); width:100%; box-sizing:border-box; padding-left: env(safe-area-inset-left); padding-right: env(safe-area-inset-right); padding-bottom: env(safe-area-inset-bottom); }
    .hotspot { position:absolute; background: rgba(255,0,0,0); border:0; padding:0; margin:0; cursor:pointer; -webkit-tap-highlight-color: transparent; }
    #btn-back { top:2.6%; left:3.6%; width:9.2%; height:6.8%; min-width:44px; min-height:44px; }
    #btn-verso { top:5.2%; left:50.5%; width:14.5%; height:6.2%; transform:translateX(-8%); min-width:44px; min-height:44px; }
    .last-row { position: fixed; left:6%; right:6%; bottom: calc(env(safe-area-inset-bottom) + 12px); z-index:2; pointer-events:none; display:flex; align-items:center; gap:8px; font-size:13px; font-weight:400; color:#000; line-height:1; padding-left:6px; }
    .last-row .auth { font-weight:600; font-size:13px; }
    @media (max-width:360px) { #btn-back { top:3.2%; left:4.2%; width:11%; height:7.6%; } #btn-verso { top:6.2%; left:51%; width:17%; height:7.6%; transform:translateX(-9%); } .last-row { left:5%; right:5%; bottom: calc(env(safe-area-inset-bottom) + 10px); font-size:12px; padding-left:4px; } }
    @media (min-width:900px) { #btn-back, #btn-verso { min-width:56px; min-height:56px; } }
  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>

  <div class="ui" role="main" aria-label="Página frente do documento">
    <!-- hotspot voltar (usa navegação relativa para permanecer no mesmo scope) -->
    <button id="btn-back" class="hotspot" aria-label="Voltar"></button>

    <!-- hotspot Verso -->
    <button id="btn-verso" class="hotspot" aria-label="Abrir verso"></button>

    <!-- data/hora fixa -->
    <div class="last-row" aria-hidden="false">
      <span>Última atualização em:</span>
      <span id="auth-timestamp" class="auth">carregando...</span>
    </div>
  </div>

  <script>
    // Corrige 100vh em iOS
    function setVh(){ document.documentElement.style.setProperty('--vh', (window.innerHeight || document.documentElement.clientHeight) + 'px'); }
    setVh(); window.addEventListener('resize', setVh);

    // timestamp helper
    function two(n){ return n < 10 ? '0' + n : String(n); }
    function buildTimestamp(date){ const d = two(date.getDate()); const m = two(date.getMonth()+1); const y = String(date.getFullYear()).slice(-2); const hh = two(date.getHours()); const mm = two(date.getMinutes()); return `${d}/${m}/${y} - ${hh}:${mm}`; }
    function setAuthTimestamp(){ const el = document.getElementById('auth-timestamp'); if(!el) return; el.textContent = buildTimestamp(new Date()); }

    // Navegação relativa para manter standalone scope
    (function(){
      const btnBack = document.getElementById('btn-back');
      if(btnBack){
        btnBack.addEventListener('click', function(e){
          e.preventDefault();
          try { window.location.href = 'index.html'; } catch(err) { window.open('index.html', '_self'); }
        }, {passive:false});
      }
      const btnVerso = document.getElementById('btn-verso');
      if(btnVerso){
        btnVerso.addEventListener('click', function(e){
          e.preventDefault();
          try { window.location.href = 'pagina3.html'; } catch(err) { window.open('pagina3.html', '_self'); }
        }, {passive:false});
      }
    })();

    // Inicializa timestamp
    window.addEventListener('load', function(){ setAuthTimestamp(); /* opcional: atualizar a cada minuto -> setInterval(setAuthTimestamp, 60000); */ });

    // Debug snippet para checar modo standalone
    (function(){
      const isStandalone = window.navigator.standalone || window.matchMedia('(display-mode: standalone)').matches;
      console.info('Standalone?', isStandalone);
    })();

    // Opcional: registra service worker (se presente em /sw.js)
    if('serviceWorker' in navigator){
      navigator.serviceWorker.register('/sw.js').catch(err => console.warn('SW register failed', err));
    }
  </script>
</body>
</html>
